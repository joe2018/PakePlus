import{q as e,H as l,r as a,z as r,y as t,o as u,e as o,c as s,b as d,g as n,w as i,F as p,A as c,h as f,f as m,j as g,M as v,_}from"./index-D2o1O3Np.js";const b=new class{getConfig(){return e("/config/list","get")}updateConfig(l){return e("/config/update","post",l)}getSupportPlatforms(){return e("/config/support","get")}},y={style:{display:"flex","flex-direction":"column",gap:"8px"}},V={style:{display:"flex","justify-content":"center",width:"100%"}},h=_(l({__name:"index",setup(e){const l=a([]),_=a({platform:"",url:"",secret_key:"",appid:"",access_token:"",secret_id:"",voice_url:""}),h=r("platformRef"),k=t({platform:[{required:!0,message:"请选择平台",trigger:"blur"}],url:[{required:!0,message:"请输入地址",trigger:"blur"}],secret_key:[{required:!0,message:"请输入密钥",trigger:"blur"}],appid:[{required:!0,message:"请输入Appid",trigger:"blur"}],access_token:[{required:!0,message:"请输入AccessToken",trigger:"blur"}],secret_id:[{required:!0,message:"请输入SecretId",trigger:"blur"}],voice_url:[{required:!0,message:"请输入语音地址",trigger:"blur"}]}),q=a([]);u((()=>{b.getSupportPlatforms().then((e=>{l.value=e,b.getConfig().then((l=>{q.value=l,e.length>0&&x("qianwen")}))}))}));const w=async()=>{await h.value.validate();try{await b.updateConfig(_.value),v.success("保存成功")}catch(e){v.error(e.message)}},x=e=>{console.log("platform",e);const a=C(e,q.value),r=C(e,l.value);console.log("find",a,r),_.value=a?{...a}:{...r}},C=(e,l)=>{let a=null;for(var r of l)if(r.platform==e){a=r,console.log("find",a,e);break}return a};return(e,a)=>{const r=o("el-option"),t=o("el-select"),u=o("el-form-item"),v=o("el-input"),b=o("el-button"),h=o("el-form"),q=o("el-card");return d(),s("div",y,[n(q,null,{header:i((()=>a[4]||(a[4]=[m("div",{class:"card-header"},[m("span",null,"AI模型")],-1)]))),default:i((()=>[n(h,{model:_.value,rules:k,"label-width":"120",ref:"platformRef"},{default:i((()=>[n(u,{label:"平台",prop:"platform"},{default:i((()=>[n(t,{modelValue:_.value.platform,"onUpdate:modelValue":a[0]||(a[0]=e=>_.value.platform=e),placeholder:"请选择",onChange:x},{default:i((()=>[(d(!0),s(p,null,c(l.value,(e=>(d(),f(r,{key:e.platform,label:e.name,value:e.platform},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),n(u,{label:"地址",prop:"url"},{default:i((()=>[n(v,{modelValue:_.value.url,"onUpdate:modelValue":a[1]||(a[1]=e=>_.value.url=e),disabled:""},null,8,["modelValue"])])),_:1}),n(u,{label:"密钥",prop:"secret_key"},{default:i((()=>[n(v,{modelValue:_.value.secret_key,"onUpdate:modelValue":a[2]||(a[2]=e=>_.value.secret_key=e)},null,8,["modelValue"])])),_:1}),n(u,{label:"语音地址",prop:"voice_url"},{default:i((()=>[n(v,{modelValue:_.value.voice_url,"onUpdate:modelValue":a[3]||(a[3]=e=>_.value.voice_url=e)},null,8,["modelValue"])])),_:1}),n(u,null,{default:i((()=>[m("div",V,[n(b,{type:"primary",onClick:w},{default:i((()=>a[5]||(a[5]=[g("保存配置")]))),_:1})])])),_:1})])),_:1},8,["model","rules"])])),_:1})])}}}),[["__scopeId","data-v-4848823a"]]);export{h as default};
