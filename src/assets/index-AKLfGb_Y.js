import{q as e,H as l,r as a,z as r,y as t,o as u,e as o,c as s,b as d,g as n,w as i,F as p,A as c,h as f,f as m,j as g,M as _,_ as v}from"./index-DffehwHv.js";const b=new class{getConfig(){return e("/config/list","get")}updateConfig(l){return e("/config/update","post",l)}getSupportPlatforms(){return e("/config/support","get")}},y={style:{display:"flex","flex-direction":"column",gap:"8px"}},k={style:{display:"flex","justify-content":"center",width:"100%"}},V=v(l({__name:"index",setup(e){const l=a([]),v=a({platform:"",url:"",secret_key:"",appid:"",access_token:"",secret_id:"",voice_url:""});let V={platform:"",url:"",secret_key:"",appid:"",access_token:"",secret_id:"",voice_url:""};const h=r("platformRef"),q=t({platform:[{required:!0,message:"请选择平台",trigger:"blur"}],url:[{required:!0,message:"请输入地址",trigger:"blur"}],secret_key:[{required:!0,message:"请输入密钥",trigger:"blur"}],appid:[{required:!0,message:"请输入Appid",trigger:"blur"}],access_token:[{required:!0,message:"请输入AccessToken",trigger:"blur"}],secret_id:[{required:!0,message:"请输入SecretId",trigger:"blur"}],voice_url:[{required:!0,message:"请输入语音地址",trigger:"blur"}]});u((()=>{b.getSupportPlatforms().then((e=>{l.value=e,b.getConfig().then((l=>{V={...l},null==l?w(e[0].platform):v.value={...l}}))}))}));const x=async()=>{await h.value.validate();try{await b.updateConfig(v.value),_.success("保存成功")}catch(e){_.error(e.message)}},w=e=>{const a=C(e,l.value);V.platform==e?(console.log("oldPlatform",V,e),v.value={...V}):v.value={...a}},C=(e,l)=>{let a=null;for(var r of l)if(r.platform==e){a=r,console.log("find",a,e);break}return a};return(e,a)=>{const r=o("el-option"),t=o("el-select"),u=o("el-form-item"),_=o("el-input"),b=o("el-button"),V=o("el-form"),h=o("el-card");return d(),s("div",y,[n(h,null,{header:i((()=>a[4]||(a[4]=[m("div",{class:"card-header"},[m("span",null,"AI模型")],-1)]))),default:i((()=>[n(V,{model:v.value,rules:q,"label-width":"120",ref:"platformRef"},{default:i((()=>[n(u,{label:"平台",prop:"platform"},{default:i((()=>[n(t,{modelValue:v.value.platform,"onUpdate:modelValue":a[0]||(a[0]=e=>v.value.platform=e),placeholder:"请选择",onChange:w},{default:i((()=>[(d(!0),s(p,null,c(l.value,(e=>(d(),f(r,{key:e.platform,label:e.name,value:e.platform},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),n(u,{label:"地址",prop:"url"},{default:i((()=>[n(_,{modelValue:v.value.url,"onUpdate:modelValue":a[1]||(a[1]=e=>v.value.url=e),disabled:""},null,8,["modelValue"])])),_:1}),n(u,{label:"密钥",prop:"secret_key"},{default:i((()=>[n(_,{modelValue:v.value.secret_key,"onUpdate:modelValue":a[2]||(a[2]=e=>v.value.secret_key=e)},null,8,["modelValue"])])),_:1}),n(u,{label:"语音地址",prop:"voice_url"},{default:i((()=>[n(_,{modelValue:v.value.voice_url,"onUpdate:modelValue":a[3]||(a[3]=e=>v.value.voice_url=e)},null,8,["modelValue"])])),_:1}),n(u,null,{default:i((()=>[m("div",k,[n(b,{type:"primary",onClick:x},{default:i((()=>a[5]||(a[5]=[g("保存配置")]))),_:1})])])),_:1})])),_:1},8,["model","rules"])])),_:1})])}}}),[["__scopeId","data-v-abf23810"]]);export{V as default};
